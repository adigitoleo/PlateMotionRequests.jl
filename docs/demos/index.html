<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Demonstrations · PlateMotionRequests.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.044/juliamono.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">PlateMotionRequests.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">PlateMotionRequests</a></li><li><a class="tocitem" href="../changelog/">Changelog</a></li><li class="is-active"><a class="tocitem" href>Demonstrations</a><ul class="internal"><li><a class="tocitem" href="#Acessing-response-data"><span>Acessing response data</span></a></li><li><a class="tocitem" href="#Plate-motion-map-using-GMT.jl"><span>Plate motion map using GMT.jl</span></a></li><li><a class="tocitem" href="#Plate-motion-map-using-GMT"><span>Plate motion map using GMT</span></a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Demonstrations</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Demonstrations</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com//blob/master/docs/src/demos.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Demonstrations"><a class="docs-heading-anchor" href="#Demonstrations">Demonstrations</a><a id="Demonstrations-1"></a><a class="docs-heading-anchor-permalink" href="#Demonstrations" title="Permalink"></a></h1><p>Please check the <a href="../../../README.md">README</a> for a quick overview. To follow these demonstrations, it is first necessary to get some plate motion data:</p><pre><code class="language-julia hljs">julia&gt; using PlateMotionRequests
julia&gt; latitudes = -40:10:40
julia&gt; longitudes = 110:10:210
julia&gt; GSRMdata = platemotion(
           repeat(latitudes, length(longitudes)),
           repeat(longitudes, inner = length(latitudes)),
       )</code></pre><h2 id="Acessing-response-data"><a class="docs-heading-anchor" href="#Acessing-response-data">Acessing response data</a><a id="Acessing-response-data-1"></a><a class="docs-heading-anchor-permalink" href="#Acessing-response-data" title="Permalink"></a></h2><p>The data is stored in a <a href="https://typedtables.juliadata.org/latest/man/table/"><code>Table</code></a>. Note that the calculator knows how to handle longitude values greater than 180°, but whatever values are given will also end up in the response table. The number and name of the columns depends on the requested format. To list the available columns, use <code>columnnames</code>:</p><pre><code class="language-julia hljs">julia&gt; using TypedTables  # install this package using `] add TypedTables`
julia&gt; columnnames(GSRMdata)
(:lon, :lat, :velocity_east, :velocity_north, :plate_and_reference, :model)</code></pre><p>Columns are accessed as fields of the table, e.g.:</p><pre><code class="language-julia hljs">julia&gt; GSRMdata.velocity_east
99-element Vector{Float64}:
  40.67
  42.17
  42.4
  41.35
  24.79
  27.08
  28.56
  29.17
  28.9
  34.18
  37.13
  38.95
   ⋮
 -61.79
 -56.93
 -50.35
 -54.32
 -60.03
 -63.91
 -65.85
 -65.81
 -63.78
 -59.82
 -54.05
 -46.64</code></pre><p>Rows are accessed by index, e.g.:</p><pre><code class="language-julia hljs">julia&gt; GSRMdata[1]
(lon = 110.0, lat = -40.0, velocity_east = 40.67, velocity_north = 56.92, plate_and_reference = &quot;AU(NNR)&quot;, model = &quot;GSRM v2.1&quot;)
julia&gt; typeof(ans)
NamedTuple{(:lon, :lat, :velocity_east, :velocity_north, :plate_and_reference, :model), Tuple{Float64, Float64, Float64, Float64, String, String}}</code></pre><p>For more advanced manipulations, refer to the documentation for <code>TypedTables</code> and <code>Table</code>.</p><h2 id="Plate-motion-map-using-GMT.jl"><a class="docs-heading-anchor" href="#Plate-motion-map-using-GMT.jl">Plate motion map using GMT.jl</a><a id="Plate-motion-map-using-GMT.jl-1"></a><a class="docs-heading-anchor-permalink" href="#Plate-motion-map-using-GMT.jl" title="Permalink"></a></h2><p>To plot the plate motion using <a href="https://www.generic-mapping-tools.org/">GMT</a> we can use the <a href="https://github.com/GenericMappingTools/GMT.jl">GMT.jl</a> package. Let&#39;s also save the data so we can come back and adjust the plot later. The NetCDF writer could be used here, because it automatically puts the data into matrices. This will be convenient for plotting with GMT.</p><pre><code class="language-julia hljs">julia&gt; write_platemotion(&quot;platemotion.nc&quot;, GSRMdata)</code></pre><p>To read the NetCDF file, the <a href="https://github.com/Alexander-Barth/NCDatasets.jl">NCDatasets.jl</a> package is recommended. These commands should plot the data as vectors on a map:</p><pre><code class="language-julia hljs">julia&gt; using GMT

julia&gt; using NCDatasets

julia&gt; ds = NCDataset(&quot;platemotion.nc&quot;)

julia&gt; coast(
           region = (110, 210, -35, 45),
           projection = :Mercator,
           frame = :auto,
           land = :dimgray,
           water = :darkgray,
           shore = :thinner,
       )

julia&gt; grdvector!(
           mat2grid(ds[&quot;velocity_east&quot;][:], x = ds[&quot;lon&quot;][:], y = ds[&quot;lat&quot;][:]),
           mat2grid(ds[&quot;velocity_north&quot;][:], x = ds[&quot;lon&quot;][:], y = ds[&quot;lat&quot;][:]),
           arrow = (; shape = 0, stop = true, length = 0.2, angle = 45, pen = :white),
           fill = :white,
           vec_scale = 100,
           linecolor = :white,
           linewidth = :thinner,
           show = true,
       )
</code></pre><p><img src="../assets/platemotion_GMTjl.png" alt/></p><h2 id="Plate-motion-map-using-GMT"><a class="docs-heading-anchor" href="#Plate-motion-map-using-GMT">Plate motion map using GMT</a><a id="Plate-motion-map-using-GMT-1"></a><a class="docs-heading-anchor-permalink" href="#Plate-motion-map-using-GMT" title="Permalink"></a></h2><p>If the GMT.jl package isn&#39;t working, well... help us fix it! But if you really want to use command line GMT, just save the data to a text file:</p><pre><code class="language-julia hljs">julia&gt; write_platemotion(&quot;platemotion.dat&quot;, GSRMdata)</code></pre><p>This example GMT script should plot the data as vectors on a map. In general, the scaling parameters will need to be adjusted depending on the map size. You might also need to re-download the data using <code>format = &quot;psvelo&quot;</code>.</p><pre><code class="language-sh hljs">#!/bin/sh

gmt begin platemotion
    gmt psbasemap -R110/210/-40/40 -JM14c -Baf -BWSen
    gmt grdimage @earth_relief_10m -JM -n+a -t60
    gmt psvelo platemotion.dat -Se0.015/0.95 -Gblack -W1c,black -h1
gmt end show
</code></pre><p><img src="../assets/platemotion.png" alt/></p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../changelog/">« Changelog</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.17 on <span class="colophon-date" title="Monday 23 May 2022 19:08">Monday 23 May 2022</span>. Using Julia version 1.7.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
